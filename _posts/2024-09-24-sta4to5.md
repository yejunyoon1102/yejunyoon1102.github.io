---
layout : post
title : "데이터 분석 : 통계 101 데이터 분석 4장 ~ 5장"
date : 2024-09-17
categories : [Data Analysis, Statistics]
---
# 4장 ~ 5장

### 4.1 추론통계를 배우기 전에

![1.png](/assets/img/posts/STATISTIC/STATISTIC4to5/1.png)

추론통계 방법에 있어 “데이터(표본)을 얻는다는 것?”

모집단에서 일부를 표본으로 추출한다 → 모집단에 포함된 전체 값으로 구성된 분포에서 일부를 추출

모집단을 나타내는 분포 : **모집단분포**

모집단분포를 특정 짓는 양 : **모수(파라미터)**

![2.png](/assets/img/posts/STATISTIC/STATISTIC4to5/2.png)

‘얻은 표본으로 모집단을 추정한다’ → 얻은 실현값으로 이 값을 발생시킨 확률분포를 추정’

![3.png](/assets/img/posts/STATISTIC/STATISTIC4to5/3.png)

- **무작위 추출**

모집단에서 표본을 얻을 때 중요한 것이 무작위 추출!

- 단순무작위추출법
    
    → 가장 이상적인 방법, 표본에 있을 수 있는 모든 요소를 목록으로 만들고, 난수를 이용하여 표본을 정함
    
- 층화추출법
    
    → 실제로 자주 사용, 모집단을 몇 개의 층으로 미리 나누고, 각 층에서 필요한 수의 조사대상을 무작위로 추출
    

### 4.2 표본오차와 신뢰구간

![4.png](/assets/img/posts/STATISTIC/STATISTIC4to5/4.png)

정말로 알고 싶은 것 = 모집단평균 μ

→ 표본을 모집단에서 무작위로 추출해서 모집단평균 μ추정

만약 표본평균이 모집단평균 μ와 정확하게 일치한다면 표본으로부터 모집단의 평균 알 수 있음 → 모집단을 알 수 있음

일반적으로 표본평균은 모평균과 일치하지 않음

→ 이런 어긋남을 **표본오차(sampling error)**라고 함!!

표본은 모집단의 성질과 정확히 일치하지 않고, 확률오차를 수반함

표본평균과 모평균의 관계에는 **큰 수의 법칙**이 성립

→ 표본크기 n이 커질수록 표본평균 x̄가 모평균  μ에 한없이 가까워짐

- **중심극한정리**

→ 모집단이 어떤 분포이든 간에, 표본크기 n이 커질수록 표본평균 x̄의 분포는 정규분포로 근사할 수 있다

표본크기 n으로 표본을 추출하고, 표본평균 x̄를 계산하는 작업을 몇 번이고 반복해서 표본평균을 한데 모아 히스토그램을 그림!

![5.png](/assets/img/posts/STATISTIC/STATISTIC4to5/5.png)

![6.png](/assets/img/posts/STATISTIC/STATISTIC4to5/6.png)

일반적으로 표본의 크기가 30이상이면 중심극한정리 사용 가능

모집단의 성질을 추정하는 데 사용하는 통계량 : **추정량**

표본 크기n을 무한대로 했을 때!

- 추정량이 모집단의 성질과 일치 : 일치추정량
- 추정량의 평균값(기댓값)이 모집단의 성질과 일치 : **비편향추정량**
    
    → 매번 얻을 때마다 확률적으로 다른 값이 되지만, 평균으로 보면 모집단의 성질을 과대하지도 과소하지도 않게 나타냄!
    
    ![7.png](/assets/img/posts/STATISTIC/STATISTIC4to5/7.png)
    

표본평균 분포의 평균은 모집단의 성질인 μ와 일치하므로, 표본평균은 모평균을 편향되지 않게 추정하는 비편향추정량

![8.png](/assets/img/posts/STATISTIC/STATISTIC4to5/8.png)

![9.png](/assets/img/posts/STATISTIC/STATISTIC4to5/9.png)

표본에서 계산된 분산이 모집단의 분산을 과소평가 하는 경향..!

**비편향분산**은 표본분산의 편향을 수정한 분산!

→ 분산을 계산할 때, 표본평균에 대한 계산에서 자유도가 하나 빠짐!!

모집단을 추정하는 데 필요한 경우는 비편향분산 사용!!!

- **표본오차의 분포**

표본평균 x̄의 분포 평균이 모평균 μ와 일치함(중심극한정리)

→ 표본오차 x̄ -  μ의 분포는 평균이 0이 되고, 표준편차는 σ / √n

따라서 표본 크기 n이 커질수록 평균이 0이고 표준편차가 σ / √n 인 정규분포로 근사 가능!!

→ 모집단의 표준편차 σ 랑 표본크기 n 2개의 값만 알면 표본오차의 분포 구할 수 있네!

 σ는 모집단의 성질이라 미지의 숫자인데… 표본에서 추정한 비편향표준편차 s를 σ 대신 사용한 s / √n 를 표준오차로 삼자!!!!!

이때 표본오차는 **t분포**를 따르게 되어있음

- **신뢰구간**

00 % 신뢰구간? : 00%의 확률로 이 구간에 모평균 μ가 존재!!

단 확률변수는 표본평균 x̄

→ 표본에서 구한 모평균 μ의 추정값을 어느 정도 신뢰할 수 있는가?

![10.png](/assets/img/posts/STATISTIC/STATISTIC4to5/10.png)

**t분포**는 ‘모집단이 정규분포라는 가정’ 하에 미지의 모집단 표준편차 σ를 표본으로 계산한 비편향표준편차 s로 대응했을 때, x̄ -  μ 를 표준오차 s / √n 로 나누어 표준화한 값이 따르는 분포!!

→ 표본 크기가 작고 모집단의 분산을 모를 때 사용!!

![11.png](/assets/img/posts/STATISTIC/STATISTIC4to5/11.png)

정밀도를 높이려면?

→ 오차분포의 너비를 나타내는 표준오차 s / √n에 주목!

→ 분자인 비편향표준편차 s를 작게 하거나, 분모인 표본크기 n을 크게 하는 방법

### 5.1 가설검정의 원리

**가설검정**이란, 분석자가 세운 가설을 검증하기 위한 방법

**p값(p-value)**라는 수치를 계산하여 가설을 지지하는지 여부를 판단

![12.png](/assets/img/posts/STATISTIC/STATISTIC4to5/12.png)

어떠한 조치를 취한 집단 : 실험군

실험군과 비교, 대조를 위해 마련한 집단 : 대조군

- 밝히고 하는 가설의 부정 명제 : **귀무가설**
- 밝히고 싶은 가설 : **대립가설**

가설검정에서는 상정한 가설을 확인하고자 그 부정 명제인 귀무가설을 세우고, 이 귀무가설이 틀렸음을 주장하는 것으로 대립가설을 지지한다는 흐름!!

ex) 귀무가설 : μₐ = μᵦ / 대립가설 :  μₐ ≠ μᵦ

귀무가설(μₐ = μᵦ)이 옳다 하더라도 모집단에서 얻은 표본평균 x̄ₐ, x̄ᵦ가 통상 모평균  μₐ, μᵦ와 어긋남이 있기 때문에  x̄ₐ≠x̄ᵦ 가 된다는 것을 알 수 있음

→ 표본평균의 차이 x̄ₐ - x̄ᵦ가 귀무가설이 옳을 때에도 생기는 단순한 데이터 퍼짐인지, 아니면 가설이 옳았다 라는 건지 구별할 필요가 있음!!

![13.png](/assets/img/posts/STATISTIC/STATISTIC4to5/13.png)

**p값(p-value)** : 귀무가설이 옳다고 가정했을 때 관찰한 값 이상으로 극단적인 값이 나올 확률

→ 이 값이 작다? 귀무가설이 옳은 세계에서는 현실에서 얻은 데이터가 잘 나타나지 않음!

- p값이 0.01 이하인 경우 → 기무가설 기각(대립가설 선택)
    
    이때 평균값의 차이는 ‘통계적으로 유의미한 차이가 있다’ 라고 표현
    
- p값이 0.1 이상인 경우 → 기무가설 채택
    
    ‘통계적으로 유의미한 차이는 발견하지 못했다’
    

여기서 귀무가설을 기각할 것인지 채택할 것인지 판단 경계로 이용하는 값을 **유의수준(α)** 라고 함

분산분포의 가운데 부분은 자주 일어나는 사건을 나타내지만, 양쪽 끝은 잘 일어나지 않는 드문 현상!

이를 수치적으로 다르기 위해 앙 끝 2.5%의 발생범위를 고려하여 합쳐서 5%

→ 이 좌우 2.5%씩의 영역을 유의수준 5%인 **기각역**이라 함

실제로 얻은 값이 이 기각역에 포함 될 때는 p<0.01, 귀무가설 기각!

—> 실제 값이 이 귀무가설이 옳을 때의 t분포 내 어디에 위치하는지 구한 뒤, 그 이상의 극단적인 값이 나올 확률을 구한 것이 p값!!

양수와 음수 양쪽을 모두 고려하는 방법 : **양측검정**

어느 한쪽만 고려해 넓이를 계산하는 방법 : **단측검정**

![14.png](/assets/img/posts/STATISTIC/STATISTIC4to5/14.png)

실제 값인 표본평균으로 모집단평균을 추정하는 것이 신뢰구간이며, 귀무가설을 사용해 모평균을 μₐ - μᵦ = 0 으로 고정했을 때의 표본평균이 어떤 값이 될 것인지를 구하는게 가설검정!

### 5.3 가설검정 관련 그래프

반복이 있는 데이터에서 평균값을 계산하여 막대그래프나 산점도로 그림

→ 평균값에 더하여 위 아래로 **오차막대**를 함께 그림

![15.png](/assets/img/posts/STATISTIC/STATISTIC4to5/15.png)

![16.png](/assets/img/posts/STATISTIC/STATISTIC4to5/16.png)

가설검정에서는 평균값을 비교하고 싶어 하기에 평균값±표준오차를 그릴 때가 일반적

그림이나 표에서는 통계적으로 유의미하다는 것을 나타내고자 * 사용!

- * : p<0.05
- ** : p<0.01
- *** : p<0.001
- N.S : 유의미하지 않음

### 제 1종 오류와 제 2종 오류

![17.png](/assets/img/posts/STATISTIC/STATISTIC4to5/17.png)

![18.png](/assets/img/posts/STATISTIC/STATISTIC4to5/18.png)

- **제 1종 오류**

평균값 비교를 예로 설명하면, 실제로는 아무런 차이가 없음에도 차이가 있다고 판단해버리는 잘못

→ 진실(모집단)을 직접 알 수 없으니까 해석 결과가 제 1종 오류인지는 알 수 없음, 대신에 p값과 유의수준 α를 이용하여 오류가 일어날 확률을 통제할 수는 있음

p.f) p값은 귀무가설이 옳다고 가정했을 때였음, 확보한 데이터가 정말로 귀무가설에서 얻었다면, p<α 일 확률은 α. 따라서 α를 경계로 귀무가설을 기각하면, 제 1종 오류가 나타날 확률이 α로 통제됨

α = 0.05 ? : ‘귀무가설이 옳을 때’ 평균적으로 20번 중 1번 정도는 착오로 대립가설을 채택

- **제 2종 오류**

평균값 비교를 예로 설명하면, 실제로 차이가 있는데도, 차이가 있다고 말할 수 없어 귀무가설을 기각하지 않는 판단을 해버리는 잘못

제 2종 오류가 일어날 확률 : β

제 2종 오류가 일어나지 않을 확률(올바르게 판단할 확률) : 검정력 : 1 - β

일반적으로 검정력을 80%로 설정, but  α와 달리 직접 통제 불가능!

→ β는 표본크기 n이 커질수록 작아지고, 효과크기가 커짐에 따라도 작아짐

→ 이 관계로부터 검정력이 80%가 되도록 표본크기를 설계하는게 이상적 가설검정 순서

- α &  β 간의 상충관계

한쪽이 작아지면 다른 한쪽이 커짐!!!

α와 β의 관계는 표본크기 n에 따라 달라짐

![19.png](/assets/img/posts/STATISTIC/STATISTIC4to5/19.png)

효과크기 : 일반적으로 얼마나 큰 효과가 있는지를 나타내는 지표

검출하고자 하는 효과를 미리 설정하고 실험 진행하기!!

![20.png](/assets/img/posts/STATISTIC/STATISTIC4to5/20.png)

α와 β, 표본크기 n, 효과크기 d의 네 값중 셋을 결정하면, 나머지 하나는 자동으로 정해짐!!!